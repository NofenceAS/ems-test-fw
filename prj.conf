#  Faulting instruction address (r15/pc): 0x00000000
CONFIG_MAIN_STACK_SIZE=4096

# Create signed images
# See https://developer.nordicsemi.com/nRF_Connect_SDK/doc/latest/mcuboot/readme-ncs.html
CONFIG_BOOTLOADER_MCUBOOT=y

# We definitely want power management
#CONFIG_PM=y
#CONFIG_PM_DEVICE=y
#CONFIG_PM_DEVICE_RUNTIME=y
#CONFIG_UART_1_GPIO_MANAGEMENT=y

# We need PWM for the Buzzer and electric pulse
#CONFIG_PWM=y

# Enable loging using RTT only
CONFIG_STDOUT_CONSOLE=y
CONFIG_RTT_CONSOLE=y
#CONFIG_UART_CONSOLE=n
CONFIG_CONSOLE=y
CONFIG_LOG=y
CONFIG_LOG_MODE_IMMEDIATE=y
CONFIG_USE_SEGGER_RTT=y
CONFIG_LOG_BACKEND_RTT=y
CONFIG_LOG_BACKEND_UART=n
CONFIG_LOG_BUFFER_SIZE=15360
CONFIG_SEGGER_RTT_BUFFER_SIZE_UP=15360
#CONFIG_LOG_MODE_DEFERRED=y
CONFIG_LOG_RUNTIME_FILTERING=y
CONFIG_LOG_PRINTK=y
CONFIG_LOG_PROCESS_TRIGGER_THRESHOLD=0
CONFIG_LOG_STRDUP_BUF_COUNT=16
CONFIG_CBPRINTF_FP_SUPPORT=y

CONFIG_BT=y
CONFIG_BT_DEVICE_NAME="NF999999"
CONFIG_BT_BROADCASTER=y
CONFIG_BT_OBSERVER=y
CONFIG_BT_DEBUG_LOG=n
CONFIG_BT_PERIPHERAL=y
CONFIG_BT_PERIPHERAL_PREF_MIN_INT=6
CONFIG_BT_PERIPHERAL_PREF_MAX_INT=16
CONFIG_BT_PERIPHERAL_PREF_LATENCY=0
CONFIG_BT_PERIPHERAL_PREF_TIMEOUT=400
CONFIG_BT_BONDABLE=n
CONFIG_BT_LL_SOFTDEVICE=y
CONFIG_BT_MAX_CONN=1
CONFIG_BT_AUTO_PHY_UPDATE=y
CONFIG_BT_DATA_LEN_UPDATE=y
CONFIG_BT_HCI_ACL_FLOW_CONTROL=y
CONFIG_BT_L2CAP_TX_MTU=247
CONFIG_BT_BUF_ACL_RX_SIZE=251
CONFIG_BT_NUS=y
CONFIG_BT_GATT_CLIENT=y
CONFIG_BT_SMP=y
CONFIG_BT_CTLR=y
CONFIG_BT_CTLR_RX_BUFFERS=10
CONFIG_BT_BUF_ACL_TX_COUNT=10
CONFIG_BT_BUF_ACL_TX_SIZE=251
CONFIG_BT_CTLR_DATA_LENGTH_MAX=251

# Using math library
CONFIG_NEWLIB_LIBC=y
CONFIG_NEWLIB_LIBC_FLOAT_PRINTF=y

CONFIG_REGULATOR=y
CONFIG_REGULATOR_FIXED=y

#using Accelerometer LIS2DW, driver supports it on SPI
CONFIG_SPI=y
CONFIG_SENSOR=y
CONFIG_LIS2DW12=y
CONFIG_LIS2DW12_TRIGGER_GLOBAL_THREAD=y

#Config external flash
CONFIG_NORDIC_QSPI_NOR=y
CONFIG_FLASH=y
CONFIG_FLASH_PAGE_LAYOUT=y
CONFIG_FLASH_MAP=y
CONFIG_FCB=y

#EEPROM driver
CONFIG_EEPROM=y
CONFIG_EEPROM_AT25=y

#Enable barometer driver
CONFIG_BME280=y

#Config for GNSS, new GPS driver

CONFIG_COLLAR_PROTOCOL=y

#CONFIG_FLASH_LOG_LEVEL_DBG=y
#CONFIG_SPI_LOG_LEVEL_DBG=y

CONFIG_DIAGNOSTICS=n
CONFIG_DEBUG=n
CONFIG_SIZE_OPTIMIZATIONS=y

# Sara modem
CONFIG_NETWORKING=y
CONFIG_NET_SOCKETS=y
CONFIG_NET_OFFLOAD=y
CONFIG_NET_SOCKETS_OFFLOAD=y
CONFIG_NET_IPV4=y
CONFIG_NET_TCP=y
CONFIG_NET_NATIVE=n

#CONFIG_UART_NRFX=y
CONFIG_SERIAL=y
CONFIG_UART_INTERRUPT_DRIVEN=y
CONFIG_UBX_CONTROLLER_LOG_LEVEL=3
#Enable Ublox Sara modem
CONFIG_MODEM=y
CONFIG_MODEM_UBLOX_SARA=n
CONFIG_MODEM_UBLOX_SARA_NF=n
CONFIG_MODEM_UBLOX_SARA_R4=y
#CONFIG_MODEM_LOG_LEVEL_DBG=y
#CONFIG_MODEM_CONTEXT_VERBOSE_DEBUG=y
CONFIG_MODEM_UBLOX_SARA_R4_APN="1N01.TMGS"
CONFIG_MODEM_SOCKET_PACKET_COUNT=64

# Download client
CONFIG_DOWNLOAD_CLIENT=y
CONFIG_DOWNLOAD_CLIENT_STACK_SIZE=4096

# FOTA library
CONFIG_FOTA_DOWNLOAD=y
CONFIG_FW_INFO=y

# Event manager
CONFIG_EVENT_MANAGER=y
CONFIG_LINKER_ORPHAN_SECTION_PLACE=y
CONFIG_EVENT_MANAGER_LOG_EVENT_TYPE=n


# Mcuboot
CONFIG_BOOTLOADER_MCUBOOT=y
CONFIG_IMG_MANAGER=y
CONFIG_MCUBOOT_IMG_MANAGER=y
# Prevent MCUBOOT to use external flash as bootable image
CONFIG_PM_EXTERNAL_FLASH_MCUBOOT_SECONDARY=n

#CONFIG_DEBUG=y
#CONFIG_DEBUG_OPTIMIZATIONS=y


# DFU for FOTA
CONFIG_DFU_TARGET=y
CONFIG_DFU_TARGET_STREAM_SAVE_PROGRESS=y
CONFIG_STREAM_FLASH_ERASE=y
CONFIG_STREAM_FLASH=y
CONFIG_SETTINGS=y
CONFIG_DFU_TARGET_MCUBOOT=y
CONFIG_REBOOT=y
CONFIG_SETTINGS_NVS=y
CONFIG_NVS=y
# Support heap memory
CONFIG_HEAP_MEM_POOL_SIZE=16384
CONFIG_MAIN_STACK_SIZE=16384
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=16384
CONFIG_HW_STACK_PROTECTION=y


# Event logs
CONFIG_LOG_MODULE_STATE_EVENT=y
CONFIG_LOG_MSG_DATA_EVENT=y
CONFIG_LOG_BLE_DATA_EVENT=y
CONFIG_LOG_BLE_CTRL_EVENT=y
CONFIG_LOG_BLE_CONN_EVENT=y

CONFIG_RING_BUFFER=y

# QSPI configuration
CONFIG_NORDIC_QSPI_NOR=y
CONFIG_NORDIC_QSPI_NOR_FLASH_LAYOUT_PAGE_SIZE=4096
CONFIG_NORDIC_QSPI_NOR_STACK_WRITE_BUFFER_SIZE=16

# Bluetooth DFU
CONFIG_BOOTLOADER_MCUBOOT=y
CONFIG_IMG_MANAGER=y
CONFIG_MCUBOOT_IMG_MANAGER=y

CONFIG_MCUMGR=y
CONFIG_MCUMGR_SMP_BT=y
CONFIG_MCUMGR_SMP_BT_AUTHEN=n

CONFIG_MCUMGR_CMD_IMG_MGMT=y
CONFIG_MCUMGR_CMD_OS_MGMT=y

# QSPI configuration
CONFIG_NORDIC_QSPI_NOR=y
CONFIG_NORDIC_QSPI_NOR_FLASH_LAYOUT_PAGE_SIZE=4096
CONFIG_NORDIC_QSPI_NOR_STACK_WRITE_BUFFER_SIZE=16

# Battery
CONFIG_ADC=y
CONFIG_ADC_ASYNC=y