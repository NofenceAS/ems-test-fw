# SPDX-License-Identifier: Apache-2.0

cmake_minimum_required(VERSION 3.20.0)

# Out-of-tree driver for GNSS,
# see https://github.com/zephyrproject-rtos/zephyr/tree/main/samples/application_development/out_of_tree_driver
list(APPEND ZEPHYR_EXTRA_MODULES
        ${CMAKE_CURRENT_SOURCE_DIR}/modules/zoem8b_gps
        )

# Re-direct the directory where the 'boards' directory is found from
# $ZEPHYR_BASE to this directory.
set(BOARD_ROOT ${CMAKE_CURRENT_LIST_DIR})

# The Nofence X3 board exists out-of-tree from zephyr boards
set(BOARD nf_x3_nrf52840)

find_package(Zephyr REQUIRED HINTS $ENV{ZEPHYR_BASE})
project(x3_fw)

# These are common files used by both hardware test and the real app
set(APP_SOURCES
        src/ble/nf_ble.c
        src/ble/beacon_processor.c)

if (HARDWARE_TEST)
    set(APP_MAIN src/main_hardware_test.c)
else ()
    set(APP_MAIN src/main.c)
endif ()


target_sources(app PRIVATE ${APP_MAIN}
        ${APP_SOURCES}
        )


